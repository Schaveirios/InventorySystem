{% extends 'base.html' %}

{% block title %} Annual Report {% endblock %}


{% block head %}
    <style>
        .row {
            margin-bottom: 10px;
        }

        .card-body {
            padding:10px;
        }
    </style>

    <!-- CHART.JS LIBRARY -->
    {% load static %}
    <script src="{% static '/js/Chart.bundle.js' %}" ></script>
    <script src="{% static '/js/Chart.bundle.min.js' %}" ></script>
    <script src="{% static '/js/Chart.js' %}" ></script>
    <script src="{% static '/js/Chart.min.js' %}" ></script>

    <script>
        $("document").ready(function(){
            var canvas = document.getElementById("lineGraph");
            var ctx = canvas.getContext('2d');

            // Global Options:
            Chart.defaults.global.defaultFontColor = 'black';
            Chart.defaults.global.defaultFontSize = 16;

            var data = {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"],
            datasets: [{
                label: "Sales",
                fill: false,
                lineTension: 0.1,
                backgroundColor: "rgba(225,0,0,0.4)",
                borderColor: "red", // The main line color
                borderCapStyle: 'square',
                borderDash: [],
                borderDashOffset: 0.0,
                borderJoinStyle: 'miter',
                pointBorderColor: "black",
                pointBackgroundColor: "white",
                pointBorderWidth: 1,
                pointHoverRadius: 8,
                pointHoverBackgroundColor: "yellow",
                pointHoverBorderColor: "brown",
                pointHoverBorderWidth: 2,
                pointRadius: 4,
                pointHitRadius: 10,

                data: {{annual_sales}},
                spanGaps: true,
                }, 
            ]
            };

            
            var options = {
            scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero:true
                            },
                            scaleLabel: {
                                display: true,
                                labelString: '{{YearDisplayed}}',
                                fontSize: 20 
                            }
                        }]            
                    }  
            };

            // Chart declaration:
            var myBarChart = new Chart(ctx, {
            type: 'line',
            data: data,
            options: options
            });
        });
    </script>

    <style>
        #lineGraph{
            background-color: wheat;
            border-radius: 6px;
            box-shadow: 0 3rem 5rem -2rem rgba(0, 0, 0, 0.6);
        }
    </style>
{% endblock %}


{% block body %}

<div class="container-fluid">
    <div class="row" style="font-size:30px;margin-bottom:20px;">
        Annual Report
    </div>

    <!-- INPUTS -->
    <form action="{% url 'report:annual_report' %}" method="POST">
        {% csrf_token %}
        <div class="row">
            <div class="col-lg-2">
                Year
                {{ AnnualReportForm.year }}
            </div>
            <div class="col-lg-2">
                &nbsp;
                <input style="display:block;" type="submit" class="btn btn-success"/>
            </div>  
        </div>
    </form>

    <!-- GRAPH -->
    <div class="row">
        <div class="col-lg-12">
            <canvas id="lineGraph"></canvas>
        </div>
    </div>

</div>
    

{% endblock %}